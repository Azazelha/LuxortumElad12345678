<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Luxortum - –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü—ñ—è –ù–∞—Å—Ç—Ä–æ—é –°–≤—ñ—Ç—É</title>
    <link rel="stylesheet" href="/static/css/style.css">
    <link rel="stylesheet" href="/static/css/world-mood.css">
    <style>
        body {
            font-family: 'Arial', sans-serif;
            margin: 0;
            padding: 0;
            background-color: #121212;
            color: #f0f0f0;
            line-height: 1.6;
        }
        
        .container {
            width: 90%;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        
        header {
            text-align: center;
            padding: 30px 20px;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            color: #fff;
            border-bottom: 4px solid #4a00e0;
            margin-bottom: 40px;
        }
        
        h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 0 0 10px rgba(74, 0, 224, 0.5);
        }
        
        p {
            font-size: 1.1em;
            max-width: 800px;
            margin: 0 auto 20px;
        }
        
        .back-btn {
            display: inline-block;
            background: linear-gradient(90deg, #4a00e0, #8e2de2);
            color: white;
            padding: 8px 16px;
            border-radius: 50px;
            text-decoration: none;
            font-weight: bold;
            transition: all 0.3s ease;
            box-shadow: 0 5px 15px rgba(142, 45, 226, 0.4);
            margin-bottom: 20px;
        }
        
        .back-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(142, 45, 226, 0.6);
        }
        
        footer {
            text-align: center;
            padding: 30px 0;
            margin-top: 60px;
            color: #888;
            border-top: 1px solid #333;
        }
    </style>
</head>
<body>
    <header>
        <h1>–Ü–Ω–¥–∏–∫–∞—Ç–æ—Ä –ù–∞—Å—Ç—Ä–æ—é –°–≤—ñ—Ç—É</h1>
        <p>–î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü—ñ—è —Å–∏—Å—Ç–µ–º–∏ –≤—ñ–¥—Å—Ç–µ–∂–µ–Ω–Ω—è –µ–º–æ—Ü—ñ–π–Ω–æ–≥–æ —Å—Ç–∞–Ω—É –≤—ñ—Ä—Ç—É–∞–ª—å–Ω–æ–≥–æ —Å–≤—ñ—Ç—É</p>
    </header>
    
    <div class="container">
        <a href="/" class="back-btn">&larr; –ü–æ–≤–µ—Ä–Ω—É—Ç–∏—Å—è –Ω–∞ –≥–æ–ª–æ–≤–Ω—É</a>
        
        <div class="world-mood-container">
            <div class="mood-header">
                <h2 class="mood-title">–ù–∞—Å—Ç—Ä—ñ–π –°–≤—ñ—Ç—É</h2>
                <div class="mood-state">
                    <div id="mood-emoji" class="mood-emoji">üòå</div>
                    <div id="mood-name" class="mood-name">–ú–∏—Ä–Ω–∏–π</div>
                </div>
            </div>
            
            <div class="mood-intensity">
                <div class="intensity-label">
                    <span>–°–ª–∞–±–∫–∏–π</span>
                    <span>–°–∏–ª—å–Ω–∏–π</span>
                </div>
                <div class="intensity-bar peaceful">
                    <div id="intensity-fill" class="intensity-fill" style="width: 60%;"></div>
                </div>
            </div>
            
            <div class="effects-container">
                <div id="effect-growth" class="effect-item">
                    <div class="effect-name">–†—ñ—Å—Ç</div>
                    <div class="effect-value effect-positive">+0.2</div>
                </div>
                
                <div id="effect-creativity" class="effect-item">
                    <div class="effect-name">–¢–≤–æ—Ä—á—ñ—Å—Ç—å</div>
                    <div class="effect-value effect-positive">+0.1</div>
                </div>
                
                <div id="effect-harmony" class="effect-item">
                    <div class="effect-name">–ì–∞—Ä–º–æ–Ω—ñ—è</div>
                    <div class="effect-value effect-positive">+0.5</div>
                </div>
                
                <div id="effect-chaos" class="effect-item">
                    <div class="effect-name">–•–∞–æ—Å</div>
                    <div class="effect-value effect-negative">-0.4</div>
                </div>
            </div>
            
            <div class="events-container">
                <h3 class="events-title">–û—Å—Ç–∞–Ω–Ω—ñ –ø–æ–¥—ñ—ó</h3>
                <div id="event-list" class="event-list">
                    <!-- –ü–æ–¥—ñ—ó –±—É–¥—É—Ç—å –¥–æ–¥–∞–Ω—ñ —á–µ—Ä–µ–∑ JavaScript -->
                </div>
            </div>
        </div>
        
        <div class="mood-controls">
            <h3 class="control-title">–ö–æ–Ω—Ç—Ä–æ–ª—å –Ω–∞—Å—Ç—Ä–æ—é (–¥–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü—ñ—ó)</h3>
            
            <div class="control-section">
                <h4>–ó–º—ñ–Ω–∏—Ç–∏ –Ω–∞—Å—Ç—Ä—ñ–π</h4>
                <div class="mood-buttons">
                    <button class="mood-button" data-mood="ecstatic">–ï–∫—Å—Ç–∞—Ç–∏—á–Ω–∏–π</button>
                    <button class="mood-button" data-mood="joyful">–†–∞–¥—ñ—Å–Ω–∏–π</button>
                    <button class="mood-button" data-mood="peaceful">–ú–∏—Ä–Ω–∏–π</button>
                    <button class="mood-button" data-mood="neutral">–ù–µ–π—Ç—Ä–∞–ª—å–Ω–∏–π</button>
                    <button class="mood-button" data-mood="anxious">–¢—Ä–∏–≤–æ–∂–Ω–∏–π</button>
                    <button class="mood-button" data-mood="melancholic">–ú–µ–ª–∞–Ω—Ö–æ–ª—ñ–π–Ω–∏–π</button>
                    <button class="mood-button" data-mood="sad">–°—É–º–Ω–∏–π</button>
                    <button class="mood-button" data-mood="angry">–ì–Ω—ñ–≤–Ω–∏–π</button>
                    <button class="mood-button" data-mood="chaotic">–•–∞–æ—Ç–∏—á–Ω–∏–π</button>
                </div>
            </div>
            
            <div class="control-section">
                <h4>–Ü–Ω—Ç–µ–Ω—Å–∏–≤–Ω—ñ—Å—Ç—å</h4>
                <input type="range" id="intensity-control" class="intensity-control" min="0" max="1" step="0.1" value="0.6">
            </div>
            
            <div class="control-section">
                <h4>–î–æ–¥–∞—Ç–∏ –ø–æ–¥—ñ—é</h4>
                <div class="add-event-form">
                    <input type="text" id="event-name" class="event-input" placeholder="–ù–∞–∑–≤–∞ –ø–æ–¥—ñ—ó">
                    <select id="event-impact" class="impact-select">
                        <option value="positive">–ü–æ–∑–∏—Ç–∏–≤–Ω–∞</option>
                        <option value="neutral">–ù–µ–π—Ç—Ä–∞–ª—å–Ω–∞</option>
                        <option value="negative">–ù–µ–≥–∞—Ç–∏–≤–Ω–∞</option>
                    </select>
                    <button id="add-event-btn" class="add-event-button">–î–æ–¥–∞—Ç–∏ –ø–æ–¥—ñ—é</button>
                </div>
            </div>
        </div>
    </div>
    
    <footer>
        <p>&copy; 2025 Luxortum. –í—Å—ñ –ø—Ä–∞–≤–∞ –∑–∞—Ö–∏—â–µ–Ω—ñ.</p>
    </footer>
    
    <script src="/static/js/world-mood.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // –û—Ç—Ä–∏–º—É—î–º–æ –ø–æ—á–∞—Ç–∫–æ–≤–∏–π —Å—Ç–∞–Ω –Ω–∞—Å—Ç—Ä–æ—é —Å–≤—ñ—Ç—É
            fetchWorldMood();
            
            // –û–±—Ä–æ–±–Ω–∏–∫–∏ –ø–æ–¥—ñ–π –¥–ª—è –µ–ª–µ–º–µ–Ω—Ç—ñ–≤ –∫–µ—Ä—É–≤–∞–Ω–Ω—è
            
            // –ö–Ω–æ–ø–∫–∏ –∑–º—ñ–Ω–∏ –Ω–∞—Å—Ç—Ä–æ—é
            const moodButtons = document.querySelectorAll('.mood-button');
            moodButtons.forEach(button => {
                button.addEventListener('click', function() {
                    const newMood = this.getAttribute('data-mood');
                    const intensity = document.getElementById('intensity-control').value;
                    
                    updateWorldMood(newMood, parseFloat(intensity));
                });
            });
            
            // –ü–æ–≤–∑—É–Ω–æ–∫ —ñ–Ω—Ç–µ–Ω—Å–∏–≤–Ω–æ—Å—Ç—ñ
            const intensityControl = document.getElementById('intensity-control');
            intensityControl.addEventListener('change', function() {
                const currentMood = document.getElementById('mood-name').textContent;
                const moodCode = getMoodCodeFromName(currentMood);
                
                if (moodCode) {
                    updateWorldMood(moodCode, parseFloat(this.value));
                }
            });
            
            // –ö–Ω–æ–ø–∫–∞ –¥–æ–¥–∞–≤–∞–Ω–Ω—è –ø–æ–¥—ñ—ó
            const addEventButton = document.getElementById('add-event-btn');
            addEventButton.addEventListener('click', function() {
                const eventName = document.getElementById('event-name').value.trim();
                const eventImpact = document.getElementById('event-impact').value;
                
                if (eventName) {
                    addWorldEvent(eventName, eventImpact);
                    document.getElementById('event-name').value = '';
                }
            });
            
            // –§—É–Ω–∫—Ü—ñ—è –¥–ª—è –ø–µ—Ä–µ—Ç–≤–æ—Ä–µ–Ω–Ω—è –ª–æ–∫–∞–ª—ñ–∑–æ–≤–∞–Ω–æ—ó –Ω–∞–∑–≤–∏ –Ω–∞—Å—Ç—Ä–æ—é –≤ –∫–æ–¥
            function getMoodCodeFromName(localizedName) {
                const moodMap = {
                    '–ï–∫—Å—Ç–∞—Ç–∏—á–Ω–∏–π': 'ecstatic',
                    '–†–∞–¥—ñ—Å–Ω–∏–π': 'joyful',
                    '–ú–∏—Ä–Ω–∏–π': 'peaceful',
                    '–ù–µ–π—Ç—Ä–∞–ª—å–Ω–∏–π': 'neutral',
                    '–¢—Ä–∏–≤–æ–∂–Ω–∏–π': 'anxious',
                    '–ú–µ–ª–∞–Ω—Ö–æ–ª—ñ–π–Ω–∏–π': 'melancholic',
                    '–°—É–º–Ω–∏–π': 'sad',
                    '–ì–Ω—ñ–≤–Ω–∏–π': 'angry',
                    '–•–∞–æ—Ç–∏—á–Ω–∏–π': 'chaotic'
                };
                
                return moodMap[localizedName] || 'neutral';
            }
            
            // –§—É–Ω–∫—Ü—ñ—è –¥–ª—è –æ–Ω–æ–≤–ª–µ–Ω–Ω—è –Ω–∞—Å—Ç—Ä–æ—é —Å–≤—ñ—Ç—É
            function updateWorldMood(mood, intensity) {
                const data = {
                    mood: mood,
                    intensity: intensity
                };
                
                fetch('/api/world-mood', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify(data)
                })
                .then(response => response.json())
                .then(result => {
                    if (result.status === 'success' && result.data) {
                        updateWorldMoodDisplay(result.data);
                    }
                })
                .catch(error => console.error('Error updating world mood:', error));
            }
            
            // –§—É–Ω–∫—Ü—ñ—è –¥–ª—è –¥–æ–¥–∞–≤–∞–Ω–Ω—è –Ω–æ–≤–æ—ó –ø–æ–¥—ñ—ó
            function addWorldEvent(eventName, impact) {
                const data = {
                    events: [
                        {
                            name: eventName,
                            impact: impact
                        }
                    ]
                };
                
                fetch('/api/world-mood', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify(data)
                })
                .then(response => response.json())
                .then(result => {
                    if (result.status === 'success' && result.data) {
                        updateWorldMoodDisplay(result.data);
                    }
                })
                .catch(error => console.error('Error adding world event:', error));
            }
        });
    </script>
</body>
</html>